<!DOCTYPE html>

<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/spinner.css">
	<title>Put Your Sound !</title>
</head>
<body>
	<header>
		<h1>HEADER</h1>
	</header>
	<!-- Receiver pour le onepage-->
	<div id="lecteur">{{>lecteur}}</div>
	<div id="formulaireAjout">{{>upload}}</div>
	<div id="moderation">{{>moderation}}</div>
	<!--Fin OnePage-->
	<footer><h2>FOOTER</h2></footer>

	<script src="/socket.io/socket.io.js"></script>
	<script src="/siofu/client.js"></script>
	<script src="/js/jquery.min.js"></script>
	<script src="/js/audioTagSample.js"></script>


	<script type="text/javascript">
	$( document ).ready(function(){
	var context = new AudioContext();
		var socket = io.connect('http://{{ip}}:{{port}}');
		var siofu = new SocketIOFileUpload(socket);

		siofu.listenOnSubmit(document.getElementById("submit"), document.getElementById("file"));

		siofu.addEventListener("start", function(event){
			$("#spinner").show();
			$("#formUpload").hide();
			event.file.meta.artiste = "world";
			event.file.meta.song = "songName";
			event.file.meta.genre = "genre";
		});

		siofu.addEventListener("complete", function(event){
			$("#spinner").hide();
			$("#formUpload").show();
			event.file.meta.artiste = $("#artist").val();
			event.file.meta.song = $("#songName").val();
			event.file.meta.genre = $("#genre").val();
		});

	$("#player").click(function(){
		var sample = new AudioTagSample();
		//sample.play('http://127.0.0.1:3000/DJSonaConcussive(BassnectarxRenholder).mp3');
	});

	socket.on('Stream', function(result){
		$("#audio").src(result);
	});
});
	
</script>
</body>
</html>